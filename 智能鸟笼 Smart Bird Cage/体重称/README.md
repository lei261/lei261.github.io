# 体重秤

体重秤的背景：<br>
注意：这些为个人经验，非权威观点。<br>
鸟的健康观察个人感觉主要分三大板块：<br>
1. 我们人眼看来，鸟有没有明显病态 (如闭眼，精神不好）<br>
  -- 一般鸟在生病的时候会隐藏自己的症状（不让敌人发现），所以有时候我们往往不能第一时间洞察鸟的病态。过去经验里，经常会有似病非病，决定先观察几天的情况。<br>
2. 体重骤降<br>
  -- 正常健康的成鸟，如成年猫/狗，不是经常生病的，导致我们平时这方面的意识松散，往往是感觉鸟有问题了，测一下体重，要么就是发现已经骤降，赶紧用药/送医，或者是好久不测了，这个体重到底正常吗？<br>
3. 💩 颜色以及形态<br>
  -- 个人感觉，除非天天换鸟屎盆，很难有敏锐的洞察力。有些是因为💩混在一起，看不清；也有是因为吃了带色素的水果，导致颜色变化。这个的观察一定是一个时间段的观察，常人很难用肉眼从一次排便就能推断出鸟生病了。~~~难~~~~<br>
     当然我也看到过猫圈里，有人声称天天观察猫便便 软硬程度的。我肯定做不到。。。我认识的主子们也做不到。。。<br>


这个项目的目标是鸟的健康监测，以我目前的能力 以及 用户接受程度来说（天天检查屎是不可能的 😂), 体重秤(2)是一个容易做，效果也不错的方案。

### 体重秤可分为三部分：硬件（形态），电器（传感器 + 信号变送器）+ 软件 （ESPHome / C / C++）


## 形态：
初步判断主分三类：
1. 站杆
2. 平台
3. 吊挂（如 悬挂式鸟窝）
起初是最想做 （3），因为一般鸟睡觉的时候 以及 同一时间段内，测出来的是最准的 也是 最有对比意义的。<br>
但因为鸟笼这时结构已经定形，改装空间不是很够，会导致传感器 以及 引线 外露，容易被鸟啃坏，所以被排除。<br>

因为期望鸟每天都能上去几次，我想调查鸟最喜欢哪个形态的休息地点。我做了一个测试，在一个空鸟笼内（只有铁丝网，木板，木头站杆），我用摄像头记录了鸟活动场景。
结论是鸟最喜欢站杆，他每天会花大量的时间站在站杆上，所以我最终尝试去做（1）。虽然后面事实证明这个想法以及验证方法是有问题的。。。。

在决定做站杆后，因为之前做 水暖站杆 时发现，3D打印的站杆表面较滑（砂纸 + 粗糙纹路 效果也不佳），加硅胶套/吸汗带/牛皮 会导致这是一个需要被维护的产品。
最后决定将免维护为高优先级，决定了用花椒木。

<p float="left">
  <img src="https://user-images.githubusercontent.com/1382734/217904217-c510e0ec-7804-4417-a535-1c0bce98a598.png" width="500" width="800" height="400">
  <img src="https://user-images.githubusercontent.com/1382734/217904370-c78c4dd8-1593-4a46-8629-edb7e48e7483.png" width="500" width="800" height="400">
</p>

最终是用修边机在树杆中挖槽，将称重传感器 与 传感器支架 夹在中间。<br>
再来一次的话，我可能不会选木头了 😂

### 传感器 + 变送器
称重传感器：<br>
个人其实不是很懂，但选择的时候考虑了以下几点因素：<br>
1. 品牌 以及 做工 <br>
   传感器从￥3 到 ￥300或以上 都有，这些特征的直接被我排除：铸造，非机加工；无完整产品参数；无屏蔽线；卖家表示只卖货，不懂货 等等。。。<br>
2. 量程 <br>
   理论来说，我的鸟重100多g，加上木杆100多g，我最多需要500g的传感器就足够了。量程越低，ADC在同等情况下读出的精度更高，也可以在ADC上省钱 <br>
   但是传感器都有一个安全过载范围，大多在120% - 150%量程左右。考虑到我这个是样品，我在测试以及安装是 有99%的可能不小心多施加了力，最终选了1kg的量程 <br>
3. 精度 <br>
   理论来说，我得通过传感器 非线性 灵敏度 零飘 等等参数 算出我的精度够不够。但是C3精度是我愿意承受价格范围内最高精度了，就算达不到要求，我也得接着用。。。所以就没算。。
4. 秤盘尺寸 <br>
   因为树杆大约长20-25cm，在0点的测量值 与 25cm点的测量值 差多少？ 传感器参数表会有尺寸限制，我在家里厨房称上（量程500g，物体~100g）比较了 0点 与 30cm点的差值，几乎没有差（<1g)。
   以及我尝试画了FBD，我确实到现在也不是很理解这部分，但是在我的应用力，它没有对我造成明显影响。
   
变送器：<br>
一开始我就想用HX711试一下，当时正好疫情被锁家里，没快递，硬件没进展，就多阅读了一些ADC的资料。在Arduino圈里，HX711的评论并不是很好，当然这可能跟传感器，杜邦线，面包板都有关，毕竟这是一个高精度测量仪器。
最后我没用HX711的原因是：
1. 疫情后我拿到了一个很普通的HX711模块，与ESP32插在面包板上做了一些测试。初步测试结果很不好看，精度可能在 +/- 10g
2. 国外某评论：“HX711温漂以及蠕变很不理想，我很少看到将LDO直接放在ADC芯片上的，一般电源芯片是要与信号分开的，HX711的精度问题是不是因为他的设计造成的呢？”
   我觉得他说的好像很有道理，就决定找一个更好一点的芯片。
