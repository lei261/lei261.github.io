物联网部分主分三块，ESP32, Home Assistant 本地服务器 和 微信控制+推送。    及小米设备及小米网关

前言：
最早给小太阳育雏的时候，为了稳定温度，用小米温湿度传感器+小米智能开关+加热灯 + 一个封闭育雏箱，简单拼了一个“智能温控系统”。其实就是 “如果温度 > x°C，则关闭开关 | 如果温度 < x°C, 则打开开关”。
因为功课做的不足，我万万没想到这套控制系统有很大的延迟。首先，小米温湿度传感器温度上传频率非常低，可能20分钟上传一次温度，不像绿米温度传感器（每变化0.5°C，则上传温度）；其次，网关收到信号后，居然不是本地判断+执行的！也就是说如果你正好断网断流一会，控制逻辑则会等到网络恢复 还是 下次数据上传给服务器 才会执行。在后来的调查中，发现很多养鱼或者其他圈的也被这套系统坑过。
因为我功课没做好，直接导致3星期左右大的小太阳在50°C的环境中 呆了可能有20分钟。当时整个鸟眼镜就闭上了，尽管送医救了回来，几天后的凌晨，小鸟突然暴毙了。
因为这个失误老婆痛哭的场景我永远记在心里，告诫自己要细心严谨。

我也能理解，有时候我跟别人说我这套逻辑中的冗余逻辑，总会被认为是“over-engineered”，或是太费精力费钱或者没必要。
说实话，我这套逻辑还是有漏洞的，但确实我觉得在合适的价格里做到我自认为reliable了，以及有足够冗余了。

之前小佩闹出的饮水机电死猫，猫窝翻了，导致猫窒息；以及其他品牌电动猫砂盆夹死猫现象。个人想法：小佩在1代猫砂盆里加了很多传感器，就是为了避免事故发生。但是小佩在“2代”猫砂盆里做了一些优化，但也做了一些减法。这些事故很难完全避免，我感觉小佩也想在安全与成本中找到一个平衡点。

Anyway.



ESP32:
<img src="https://user-images.githubusercontent.com/1382734/217273326-d0e99e39-cd2b-41f0-9a1f-8914bd947908.png" width="400" height="300">
ESP的核心功能有：
1. 温度测量（共9个温度计）
  --在温度过低，或者过高时候，强制启动保暖/通风程序
2. 控制继电器
  --控制通风风扇，PID控制器电源，24V电源等等
3. 体重测量
  --集成ADS1232芯片，获取体重秤数据
4. PID控制器通讯
  --设定目标温度、判断出风温度是否过高、判断加热平台是否过热
5. 许多东西的自检程序，减少安全隐患

<img src="https://user-images.githubusercontent.com/1382734/217272975-b6ff87fa-e16d-4482-95ba-0aed1bb4f53a.png" width="900" height="600">


<img src="https://user-images.githubusercontent.com/1382734/217273670-72937f08-5314-442f-9899-8162d8fda784.png" width="800" height="500">

